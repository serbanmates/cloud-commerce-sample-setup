<div class="cx-modal-container">
  <div class="cx-modal-content">
    <div>
      <!-- Modal Header -->
      <div *ngIf="loaded$ | async; else loading">
        <div class="cx-dialog-header modal-header">
          <div class="modal-title">
            <h3>
                <strong>
                  {{
                  (addedEntryWasMerged$ | async)
                    ? ('addToCart.itemsIncrementedInYourCart' | cxTranslate)
                    : ('addToCart.itemsAddedToYourCart' | cxTranslate)
                  }}
                </strong>
            </h3>
          </div>
          <button
            type="button"
            class="close"
            aria-label="Close"
            (click)="dismissModal('Cross click')"
          >
        <span aria-hidden="true">
          <cx-icon
            [type]="iconTypes.CLOSE"
            [routerLink]="{ cxRoute: 'home' } | cxUrl"
            (click)="clearCurrentSelections()"
          >
          </cx-icon>
        </span>
          </button>
        </div>
        <!-- Modal Body -->
        <div class="cx-dialog-body modal-body">
          <div class="cx-dialog-row">
            <div class="cx-dialog-item col-sm-12 col-md-6">
              <div class="cx-compact row">
                <h4>
                  <strong>
                    {{ parentBpo.name }}
                    {{ 'guidedSelling.currentSelection.offer' | cxTranslate }}
                  </strong>
                </h4>
              </div>
              <div class="cx-compact row" *ngFor="let entry of entries">
                <div class="cx-dialog-item col-sm-12 col-md-6">
                  <cx-cart-item
                    [qtyDisabled]="true"
                    [item]="entry"
                    [compact]="true"
                    [quantityControl]="getQuantityControl() | async"
                    [promotionLocation]="promotionLocation"
                    (view)="dismissModal('Product selected')"
                    [displayPrices]="false"
                  ></cx-cart-item>
                </div>
              </div>
            </div>
            <!-- Separator -->
            <div
              class="cx-dialog-separator col-sm-12 d-xs-block d-sm-block d-md-none"
            ></div>
            <!-- Total container -->
            <div class="cx-dialog-actions col-sm-12 col-md-6">
              <div class="cx-dialog-total" *ngIf="cart$ | async as cart">
                <div>
                  {{
                  'cartItems.cartTotal'
                    | cxTranslate: {count: cart.deliveryItemsQuantity}
                  }}
                </div>

                <div>
                  {{ cart.subTotal?.formattedValue }}
                </div>
                <div class="cx-dialog-promotions">
                  <cx-promotions
                    [promotions]="
                  (cart.appliedOrderPromotions || []).concat(
                    cart.potentialOrderPromotions || []
                  )
                "
                  ></cx-promotions>
                </div>
              </div>

              <!-- Actions -->
              <div class="cx-dialog-buttons">
                <a
                  [routerLink]="{ cxRoute: 'cart' } | cxUrl"
                  class="btn btn-primary"
                  cxAutoFocus
                  (click)="dismissModal('View Cart click')"
                >{{ 'addToCart.viewCart' | cxTranslate }}</a
                >
                <a
                  [routerLink]="{ cxRoute: 'checkout' } | cxUrl"
                  class="btn btn-secondary"
                  (click)="dismissModal('Proceed To Checkout click')"
                >
                  {{ 'addToCart.proceedToCheckout' | cxTranslate }}
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <ng-template #loading>
      <div class="cx-dialog-header modal-header">
        <div class="cx-dialog-title modal-title">
          {{ 'addToCart.updatingCart' | cxTranslate }}
        </div>
        <button
          type="button"
          class="close"
          aria-label="Close"
          (click)="dismissModal('Cross click')"
        >
      <span aria-hidden="true">
        <cx-icon
          [type]="iconTypes.CLOSE"
          [routerLink]="{ cxRoute: 'home' } | cxUrl"
          (click)="clearCurrentSelections()"
        >
        </cx-icon>
      </span>
        </button>
      </div>
      <!-- Modal Body -->
      <div class="cx-dialog-body modal-body">
        <div class="cx-dialog-row">
          <div class="col-sm-12">
            <cx-spinner></cx-spinner>
          </div>
        </div>
      </div>
    </ng-template>
  </div>
</div>
